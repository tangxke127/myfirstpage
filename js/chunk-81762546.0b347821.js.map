{"version":3,"sources":["webpack:///./src/views/main/main.vue?943d","webpack:///./src/views/main/main.vue","webpack:///src/views/main/main.vue","webpack:///./src/views/main/main.vue?6318","webpack:///./src/views/main/main.vue?9600","webpack:///./src/views/main/main.vue?9d4e","webpack:///./src/assets/group.png"],"names":["render","_vm","this","_c","_self","staticClass","style","siderStyles","logoImgStyles","shrink","attrs","menuList","openNames","otherStyles","currentPath","on","toggleShrink","pageOpenedList","closeTags","tagSelected","$route","meta","keepAlive","_e","staticRenderFns","name","data","components","computed","backgroundImage","padding","backgroundSize","width","overflow","left","watch","to","route","index","console","methods","init","initWebConfig","timingRefreshToken","sessionStorage","clearInterval","action","isRemoveSelected","refreshToken","localStorage","catch","created","beforeDestroy","component","module","exports"],"mappings":"iIAAA,W,oECAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,4BAA4BC,MAAOL,EAAIM,aAAc,CAACJ,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAOL,EAAIO,gBAAkBP,EAAIQ,OAAQN,EAAG,sBAAsB,CAACO,MAAM,CAAC,SAAWT,EAAIU,YAAYR,EAAG,aAAa,CAACO,MAAM,CAAC,SAAWT,EAAIU,SAAS,UAAYV,EAAIW,cAAc,GAAGT,EAAG,MAAM,CAACE,YAAY,cAAcC,MAAOL,EAAIY,aAAc,CAACV,EAAG,aAAa,CAACO,MAAM,CAAC,YAAcT,EAAIa,YAAY,OAASb,EAAIQ,QAAQM,GAAG,CAAC,aAAed,EAAIe,gBAAgBb,EAAG,WAAW,CAACO,MAAM,CAAC,eAAiBT,EAAIgB,gBAAgBF,GAAG,CAAC,UAAYd,EAAIiB,UAAU,YAAcjB,EAAIkB,gBAAgB,GAAGhB,EAAG,MAAM,CAACE,YAAY,gCAAgCC,MAAOL,EAAIY,aAAc,CAACV,EAAG,aAAa,CAAEF,EAAImB,OAAOC,KAAKC,UAAWnB,EAAG,eAAeF,EAAIsB,MAAM,GAAKtB,EAAImB,OAAOC,KAAKC,UAA6BrB,EAAIsB,KAAtBpB,EAAG,gBAAyB,MAEh4BqB,EAAkB,GCwBP,G,UAAA,CACfC,YACAC,KAFA,WAGA,OACAjB,YAGAkB,YACA,gFACA,yFACA,gFACA,+EAEAC,UACApB,cADA,WAEA,OAEAqB,6CACAC,gCACAC,uBAGAxB,YATA,WAUA,OACAyB,iCACAC,wCAGApB,YAfA,WAgBA,OACAqB,kCAGAvB,SApBA,WAqBA,uCAEAG,YAvBA,WAwBA,0CAEAG,eA1BA,WA2BA,6CAEAL,UA7BA,WA8BA,oDAGAuB,OACAf,OADA,SACAgB,GAEA,uFACA,4CAAAC,QAAAC,UAEA,qEACAC,iEACAA,gCACA,2CAEA,8DAGAC,SACAC,KADA,WAEA,sBAGAC,cALA,WAOA,4CAEA,+EACA,2CAEA,uEAEAC,mBAdA,WAcA,WAEA,qCACAC,8CAEA,4CACA,iDACAC,+BAEA,mBAEA,MAEA3B,UA3BA,SA2BA4B,GACA,MACA,sBACAC,oDAEA,+CAAAV,kBAAAS,WACA,EAEA,mBACArB,gGAEA,gBACA,4BAGAN,YA1CA,SA0CAmB,GACA,iEACA,mBACAb,qDAIAuB,aAjDA,WAkDA,gFACA,oCACAC,mCACAC,SAEAlC,aAvDA,WAwDA,2BAGAmC,QAvHA,WAwHA,aAEAC,cA1HA,WA2HAP,qCCrJ6V,I,kCCSzVQ,EAAY,eACd,EACArD,EACAwB,GACA,EACA,KACA,WACA,MAIa,aAAA6B,E,2CCpBf,W,qBCAAC,EAAOC,QAAU,IAA0B,0B","file":"js/chunk-81762546.0b347821.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=ce45b5b2&prod&lang=less&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"main-sider menu-scrollbar\",style:(_vm.siderStyles)},[_c('div',{staticClass:\"logo\",style:(_vm.logoImgStyles)}),(_vm.shrink)?_c('sider-menu-shrinked',{attrs:{\"menuList\":_vm.menuList}}):_c('sider-menu',{attrs:{\"menuList\":_vm.menuList,\"openNames\":_vm.openNames}})],1),_c('div',{staticClass:\"main-header\",style:(_vm.otherStyles)},[_c('header-nav',{attrs:{\"currentPath\":_vm.currentPath,\"shrink\":_vm.shrink},on:{\"toggleShrink\":_vm.toggleShrink}}),_c('tags-nav',{attrs:{\"pageOpenedList\":_vm.pageOpenedList},on:{\"closeTags\":_vm.closeTags,\"tagSelected\":_vm.tagSelected}})],1),_c('div',{staticClass:\"main-content common-scrollbar\",style:(_vm.otherStyles)},[_c('keep-alive',[(_vm.$route.meta.keepAlive)?_c('router-view'):_vm._e()],1),(!_vm.$route.meta.keepAlive)?_c('router-view'):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style lang=\"less\" scoped>\r\n@import \"./main.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"main\">\r\n    <div class=\"main-sider menu-scrollbar\" :style=\"siderStyles\">\r\n      <div class=\"logo\" :style=\"logoImgStyles\"></div>\r\n      <!--菜单最多支持三级菜单-->\r\n      <sider-menu-shrinked v-if=\"shrink\" :menuList=\"menuList\"></sider-menu-shrinked>\r\n      <sider-menu v-else :menuList=\"menuList\" :openNames=\"openNames\"></sider-menu>\r\n    </div>\r\n    <div class=\"main-header\" :style=\"otherStyles\">\r\n      <header-nav :currentPath=\"currentPath\" :shrink=\"shrink\" @toggleShrink=\"toggleShrink\"></header-nav>\r\n      <tags-nav :pageOpenedList=\"pageOpenedList\" @closeTags=\"closeTags\" @tagSelected=\"tagSelected\"></tags-nav>\r\n    </div>\r\n    <div class=\"main-content common-scrollbar\" :style=\"otherStyles\">\r\n      <keep-alive>\r\n        <router-view v-if=\"$route.meta.keepAlive\"></router-view>\r\n      </keep-alive>\r\n      <router-view v-if=\"!$route.meta.keepAlive\"></router-view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Main',\r\n  data () {\r\n    return {\r\n      shrink: false\r\n    }\r\n  },\r\n  components: {\r\n    'sider-menu': () => import('./components/sider-menu'),\r\n    'sider-menu-shrinked': () => import('./components/sider-menu-shrinked'),\r\n    'header-nav': () => import('./components/header-nav'),\r\n    'tags-nav': () => import('./components/tags-nav')\r\n  },\r\n  computed: {\r\n    logoImgStyles () {\r\n      return {\r\n        // backgroundImage: `url(${this.shrink ? require('../../assets/logo-min.png') : require('../../assets/whitelogo.png')})`,\r\n        backgroundImage: `url(${require('../../assets/group.png')})`,\r\n        padding: this.shrink ? '5px' : '4px',\r\n        backgroundSize: '70%'\r\n      }\r\n    },\r\n    siderStyles () {\r\n      return {\r\n        width: this.shrink ? '64px' : '208px',\r\n        overflow: this.shrink ? 'visible' : 'auto'\r\n      }\r\n    },\r\n    otherStyles () {\r\n      return {\r\n        left: this.shrink ? '64px' : '208px'\r\n      }\r\n    },\r\n    menuList () {\r\n      return this.$store.state.app.menuList\r\n    },\r\n    currentPath () {\r\n      return this.$store.state.app.currentPath\r\n    },\r\n    pageOpenedList () {\r\n      return this.$store.state.app.pageOpenedList\r\n    },\r\n    openNames () {\r\n      return this.$store.state.app.currentMenuOpenNames\r\n    }\r\n  },\r\n  watch: {\r\n    $route (to) {\r\n      // 路由变化，更新PageOpenedList\r\n      let index = this.$util.indexOfCurrentPageOpened(to.name, this.$store.state.app.pageOpenedList)\r\n      this.$store.commit('app/setPageOpenedList', { route: to, index })\r\n      // 设置header的面包屑路径\r\n      let currentPathArr = this.$util.initCurrentPath(to, this.$store.state.app.routesTree)\r\n      console.log('currentPathArr', to, this.$store.state.app.routesTree)\r\n      console.log('currentPathArr', currentPathArr)\r\n      this.$store.commit('app/setCurrentPath', currentPathArr)\r\n      // 设置左侧菜单的选中项\r\n      this.$store.commit('app/setCurrentMenuOpenNames', to.matched)\r\n    }\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.initWebConfig()\r\n      // this.timingRefreshToken()\r\n    },\r\n    initWebConfig () {\r\n      // 初始化PageOpenedList\r\n      this.$store.commit('app/setPageOpenedList')\r\n      // 设置header的面包屑路径\r\n      let currentPathArr = this.$util.initCurrentPath(this.$route, this.$store.state.app.routesTree)\r\n      this.$store.commit('app/setCurrentPath', currentPathArr)\r\n      // 设置左侧菜单的选中项\r\n      this.$store.commit('app/setCurrentMenuOpenNames', this.$route.matched)\r\n    },\r\n    timingRefreshToken () {\r\n      // 定时每1min刷新token，如果时间间隔为半小时，停止刷新token\r\n      if (!sessionStorage.lastHttpRequestTime) {\r\n        sessionStorage.lastHttpRequestTime = +new Date()\r\n      }\r\n      this.tokenInterval = setInterval(() => {\r\n        if ((+new Date()) - sessionStorage.lastHttpRequestTime > 30 * 60 * 1000) {\r\n          clearInterval(this.tokenInterval)\r\n        } else {\r\n          this.refreshToken()\r\n        }\r\n      }, 60000)\r\n    },\r\n    closeTags (action) {\r\n      let isRemoveSelected\r\n      if (typeof action === 'number') {\r\n        isRemoveSelected = this.$store.state.app.pageOpenedList[action].selected\r\n      }\r\n      this.$store.commit('app/removePageOpenedList', { route: this.$route, action })\r\n      if (isRemoveSelected) {\r\n        // 移除单个tag，导航到最后一个tag的页面\r\n        this.$router.push({\r\n          name: this.$store.state.app.pageOpenedList[this.$store.state.app.pageOpenedList.length - 1].name\r\n        })\r\n      } else if (action === 'closeAll') {\r\n        this.$router.push('/home')\r\n      }\r\n    },\r\n    tagSelected (index) {\r\n      if (this.$route.name !== this.$store.state.app.pageOpenedList[index].name) {\r\n        this.$router.push({\r\n          name: this.$store.state.app.pageOpenedList[index].name\r\n        })\r\n      }\r\n    },\r\n    refreshToken () {\r\n      const url = `/api/system/refreshToken?rememberme=${localStorage['rememberme']}`\r\n      this.$http.get(url).then((response) => {\r\n        localStorage.token = response.data.token\r\n      }).catch()\r\n    },\r\n    toggleShrink () {\r\n      this.shrink = !this.shrink\r\n    }\r\n  },\r\n  created () {\r\n    this.init()\r\n  },\r\n  beforeDestroy () {\r\n    clearInterval(this.tokenInterval)\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  .main-content{\r\n     background-color: transparent!important;\r\n     padding: 0!important;\r\n   }\r\n </style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=ce45b5b2&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=ce45b5b2&prod&lang=less&scoped=true&\"\nimport style1 from \"./main.vue?vue&type=style&index=1&id=ce45b5b2&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce45b5b2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=1&id=ce45b5b2&prod&lang=css&\"","module.exports = __webpack_public_path__ + \"img/group.c0a028d0.png\";"],"sourceRoot":""}